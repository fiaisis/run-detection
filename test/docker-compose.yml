services:
  run-detection:
    build:
      context: ../
      dockerfile: container/Dockerfile
    ports:
      - "8080:8080"
      - "5672:5672"
      - "15672:15672"
    environment:
      FIA_API_URL: localhost:8080
      FIA_API_API_KEY: shh
      QUEUE_HOST: 'rabbit-mq'
      INGRESS_QUEUE_NAME: 'watched-files'
      EGRESS_QUEUE_NAME: 'scheduled-jobs'
    volumes:
      - ../test/test_data/e2e_data:/archive

